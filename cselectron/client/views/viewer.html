<!DOCTYPE html>
<html lang="en">
<head>
  <title>Management System</title>
  <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css' />
  <link rel='stylesheet' href='../public/css/theme.css' />
  <script src="../public/js/index.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp" rel="stylesheet">
</head>
<body style="background-color: transparent;">
    <div class="bg">

    
        <div class="outsidecontainer">
            <div class="centercontainer" style="height:80%;width:80%;text-align: center;top:20%">
                <span style="text-align: center;color:white;font-size: 80px;font-weight: 600;display:inline-block" id="currentSongTitle">No Song Selected</span><br/>
                <span style="text-align: center;color:white;font-size: 40px;font-weight: 600;display:inline-block" id="currentSongSubtitle">Please Wait...</span><br/><br/>
                <div style="border: 3px solid white;height: 30px;width: 50%;display: inline-block;border-radius: 18px;background-color: transparent;padding-left: 4px;padding-right: 4px;padding-top:4px;text-align: left;margin-top: 30px;margin-left:0px" id="progressSlider">
                    <div style="border: none;height: 16px;display: inline-block;border-radius: 18px;background-color: white" class="songprogress" id="songProgress"></div>
                  </div><br/>
                  <div style="display: inline-block;width: 25%;text-align: left;">
                    <span class="material-icons-round iconbutton" style="color:white;font-size: 25px;display:inline-block;margin-right:5px;" id="isPaused">play_arrow</span>
                    <span class="material-icons-round iconbutton" style="color:white;font-size: 25px;display:none" id="isShuffled">shuffle</span>
                  </div>
                  <div style="display: inline-block;width: 25%;text-align: right;">
                    <span style="color:white;font-size: 25px;display:inline-block" id="progressText">0:00 / 0:00</span>
                  </div><br/>
            
            </div>
            
            <div class="statuscontainer">
            <div style="display: flex;">
                
                <div class="elevatedframe" style="display: inline-block;margin-right: 12px;padding-top: 8px;padding-bottom: 8px;">
                <span style="text-align: center;color:white;font-size: 15px;font-weight: 600;display:inline-block">Act 1</span>
                </div>
                <div class="elevatedframe" style="display: inline-block;padding-top: 8px;padding-bottom: 8px;margin-right: 12px;">
                <span style="text-align: center;color:white;font-size: 15px;font-weight: 600;display:inline-block;margin-right: 5px;">Viewer</span>
                <span style="height: 10px;width: 10px;background-color: green;display: inline-block;border-radius: 50%;" title="You Are Online!"></span>
                
                </div>
                <input style="display:inline-block;text-align: center;border-radius: 20px;font-size: 15px;padding: 8px 15px 8px 15px;" class="elevatedbutton" id="closeApp" type="button" value="Sign Out"/>
            </div>
            
            </div>
            <div class="additionalcontainer" style="bottom: 20px;">
              <div style="display: flex;">
                <div class="elevatedframe elevatedframebutton" style="display: inline-block;margin-right: 12px;padding-top: 8px;padding-bottom: 8px;vertical-align: middle" id="readyToggle">
                  <span class="material-icons-round iconbutton" style="text-align: center;color:white;font-size: 18px;display:inline-block;vertical-align: middle;margin-right:4px" id="readyIcon">thumb_down</span>
                  <span style="text-align: center;color:white;font-size: 15px;font-weight: 600;display:inline-block;vertical-align: middle" id="readyLabel">Not Ready</span>
                  
                </div>
              </div>
              
            </div>
        </div>
        
    </div>
    

  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
</body>
<script src="../vendor/howler/dist/howler.js"></script>
<script>

  /*
  Title: ElectronJS
  Author: OpenJS Foundation
  Date: 2/12/2021
  Code Version: 4.2.12
  Code Availaibility: https://www.electronjs.org/
  Notes: This is the library that brings the HTML page to life in a new window instead of the Chrome browser. All content that shows up inside the window is not within Electron's control, and is completely coded by this project's author
*/
  const {ipcRenderer} = require('electron');

  ipcRenderer.on("songUpdate", (event,args) => {
    document.getElementById("currentSongTitle").innerHTML = args["songTitle"]
    document.getElementById("currentSongSubtitle").innerHTML = args["songSubtitle"]
    if(args["songPaused"]){
        document.getElementById("isPaused").innerHTML = "play_arrow"
    }else{
        document.getElementById("isPaused").innerHTML = "pause"
    }
    if(args["songDuration"] != undefined){
        document.getElementById("songProgress").style.width = (args["songDuration"] / args["songLength"])*100 + "%"
        inSong = Math.round(args["songDuration"])
        outOfSong = Math.round(args["songLength"])
        var inSongM = Math.floor(inSong / 60)
        var inSongS = Math.floor(inSong % 60)
        var inSongF = inSongM + ":" + (inSongS.toString().length == 1 ? "0" + inSongS : inSongS);
        var outOfSongM = Math.floor(outOfSong / 60)
        var outOfSongS = Math.floor(outOfSong % 60)
        var outOfSongF = outOfSongM + ":" + (outOfSongS.toString().length == 1 ? "0" + outOfSongS : outOfSongS);
        document.getElementById("progressText").innerHTML = inSongF + " / " + outOfSongF;
    }
    
  });
  const closeApp = document.getElementById('closeApp');
  closeApp.addEventListener('click', () => {
    ipcRenderer.send('logOut');
  });

  let isReady = false;

  function toggleReady(evt){
    if(isReady){
      isReady = false;
      document.getElementById("readyIcon").innerHTML = "thumb_down"
      document.getElementById("readyLabel").innerHTML = "Not Ready"
      
    }else{
      isReady = true;
      document.getElementById("readyIcon").innerHTML = "thumb_up"
      document.getElementById("readyLabel").innerHTML = "Ready"
    }
    ipcRenderer.send("readyStatus", {isReady: isReady});
  }
  document.getElementById("readyToggle").addEventListener('click', toggleReady)

</script>

</html>
