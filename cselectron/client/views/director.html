<!DOCTYPE html>
<html lang="en">
<head>
  <title>Management System</title>
  <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css' />
  <link rel='stylesheet' href='../public/css/theme.css' />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp" rel="stylesheet">
</head>
<body class="bg">
  <div class="outsidecontainer">
    <div class="leftcontainer" style="height:80%">
      <div id="instanceList">
        
      </div>
      
      
    </div>
    <div class="rightcontainer" style="left:50%;width:45%">
      <span style="text-align: left;color:white;font-size: 40px;font-weight: 600;display:inline-block;vertical-align: middle;">Notes</span>
      <input style="display:inline-block;text-align: center;font-size: 15px;padding: 8px 15px 8px 15px;margin-left:10px;vertical-align: middle;" class="elevatedbutton" id="addNote" type="button" value="Add Note"/>
      <select name="noteCategory" id="noteCategory" style="display:inline-block;padding:10px" class="textbox">
          <option value="All">All Notes</option>
      </select>
        <br/>
        <div style="overflow-y: auto;height:38vh" id="noteList">
          <span style="text-align: left;color:white;font-size: 24px;font-weight: 600;display:none;vertical-align: middle;" id="noteList_pinnedLabel">Pinned Notes</span>
          <div style="text-align: center;display: flex;flex-wrap: wrap;margin-bottom: 10px;" id="noteList_pinned">
            
          </div>
          <span style="text-align: left;color:white;font-size: 24px;font-weight: 600;display:none;vertical-align: middle;" id="noteList_allnotesLabel">All Notes</span>
          <div style="text-align: center;display: flex;flex-wrap: wrap;" id="noteList_allnotes">
            
          </div>
        </div>
      
      
    </div>
    <div class="statuscontainer">
      <div style="display: flex;">
        
        <div class="elevatedframe" style="display: inline-block;margin-right: 12px;padding-top: 8px;padding-bottom: 8px;">
          <span style="text-align: center;color:white;font-size: 15px;font-weight: 600;display:inline-block">Act 1</span>
        </div>
        <div class="elevatedframe" style="display: inline-block;padding-top: 8px;padding-bottom: 8px;margin-right: 12px;">
          <span style="text-align: center;color:white;font-size: 15px;font-weight: 600;display:inline-block;margin-right: 5px;">Director</span>
          <span style="height: 10px;width: 10px;background-color: green;display: inline-block;border-radius: 50%;" title="You Are Online!"></span>
          
        </div>
        <input style="display:inline-block;text-align: center;border-radius: 20px;font-size: 15px;padding: 8px 15px 8px 15px;" class="elevatedbutton" id="closeApp" type="button" value="Exit App"/>
      </div>
      
    </div>
    
  <div id="deletePhase" class="overlayBox" style="display:none;text-align:center;">
    <div style="width:100%;height:100%;display: flex;align-items:center;justify-content:center">
      <div class="elevatedframe" style="display:inline-block;padding:30px;max-width:500px">
        <input style="display: none;" id="selected_removePhase" value=""/>
        <span style="color: white;font-size:20px;font-weight:600;margin-bottom: 5px;display:block">Are you sure?</span>
        <span style="color: white;font-size:12px;margin-bottom: 10px;display:block">You are about to permanately delete a phase and the order of the songs inside it.</span>
        <input style="display:inline-block;text-align: center;font-size: 15px;padding: 8px 15px 8px 15px;margin-left:10px;vertical-align: middle;margin-top: 5px;" class="elevatedbutton" id="cancel_removePhase" type="button" value="Cancel"/>
        <input style="display:inline-block;text-align: center;font-size: 15px;padding: 8px 15px 8px 15px;margin-left:10px;vertical-align: middle;" class="elevatedbutton" id="delete_removePhase" type="button" value="Delete"/>
      </div>
    </div>
    
  </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
<script src="../vendor/howler/dist/howler.js"></script>
<script>

  instances = []
  var rawTrackList = []
  var songList = []
  var pinnedNotes = []
  var notes = []
  function askDelete(evt){
    var phaseId = evt.srcElement.id.split("_")[0] + "_" + evt.srcElement.id.split("_")[1] + "_" + evt.srcElement.id.split("_")[2]
    var phaseObject = phases.filter(el => el.id == phaseId)[0]
    document.getElementById("selected_removePhase").value = phaseId;
    document.getElementById("deletePhase").style.display = "";
  }

  function cancelDelete(){
    document.getElementById("selected_removePhase").value = "";
    document.getElementById("deletePhase").style.display = "none";
  }

  function confirmDelete(){
    var phaseId = document.getElementById("selected_removePhase").value
    var phaseObject = phases.filter(el => el.id == phaseId)[0]
    delete phases[phases.indexOf(phaseObject)]
    document.getElementById(phaseId).remove();
    document.getElementById("deletePhase").style.display = "none";
    somethingWasChanged();
  }



  const {ipcRenderer} = require('electron');


  function resetNoteList(idToScrollTo){
    var rawStringsPinned = []
    pinnedNotes.forEach(el => {
      rawStringsPinned.push(el["id"])
    });
    document.getElementById('noteList_allnotes').innerHTML = "";
    document.getElementById('noteList_pinned').innerHTML = "";
    notes.filter(note => !rawStringsPinned.includes(note["id"])).sort((a,b) => (rawTrackList.indexOf(a["noteTrack"]) > rawTrackList.indexOf(b["noteTrack"])) ? 1 : ((rawTrackList.indexOf(a["noteTrack"]) == rawTrackList.indexOf(b["noteTrack"])) ? ((parseInt(a["noteSongIndex"]) > parseInt(b["noteSongIndex"]) ? 1 : -1)) : -1)).forEach(remake => {
      document.getElementById("noteList_allnotes").innerHTML = document.getElementById("noteList_allnotes").innerHTML + `
      <div id="${remake["id"]}" class="elevatedframe note" style="margin:5px;text-align: left;">
        <span class="material-icons-round iconbutton thisispinned" style="font-size:20px;display: inline-block;text-align:left"></span><span id="${remake["id"]}_title" class="thisismoved" style="text-align: left;color:white;font-size: 18px;font-weight: 600;display:inline-block;overflow:hidden;white-space: nowrap;text-overflow: ellipsis;width:90%">${remake["noteTitle"]}</span><div style="display: inline-block;">
          <span class="material-icons-round iconbutton" id="${remake["id"]}_triggerOptions" style="font-size:20px;display: inline-block;text-align:left">more_horiz</span>
          <div class="option-dropdown" id="${remake["id"]}_options" style="outline:none" tabindex="-1">
            <a href="#" class="pinNote option-dropdown-enabled" style="border-radius: 8px 8px 0px 0px" id="${remake["id"]}|pin">Pin</a>
            <a href="#" class="editNote" style="text-decoration: none;border-radius: 0px 0px 0px 0px;" id="${remake["id"]}|edit">Edit</a>
            <a href="#" class="removeNote" style="text-decoration: none;border-radius: 0px 0px 8px 8px;color:pink;" id="${remake["id"]}|delete">Delete</a>
          </div>
        </div><br/>
        <span id="${remake["id"]}_location" style="text-align: left;color:white;font-size: 12px;display:inline-block;overflow:hidden;white-space: nowrap;text-overflow: ellipsis"><i>${remake["isDuring"] ? "" : "After "}${remake["noteSong"]} (${parseInt(remake["noteSongIndex"])+1})</i></span><br/>
        <span id="${remake["id"]}_creator" style="text-align: left;color:white;font-size: 12px;display:inline-block;overflow:hidden;white-space: nowrap;text-overflow: ellipsis"><i>${remake["isAdminIssued"] ? "Director's Note - Only For You" : "Your Personal Note by You!"}</i></span><br/>
        <span id="${remake["id"]}_content" style="text-align: left;color:white;font-size: 14px;display:inline-block;word-wrap: break-word;overflow-x:hidden">${remake["noteContent"]}</span><br/>
        
        
      </div>
      `
    });
    if(pinnedNotes.length > 0){
      document.getElementById("noteList_pinnedLabel").style.display = "inline-block"
      document.getElementById("noteList_allnotesLabel").style.display = "inline-block"
    }else{
      document.getElementById("noteList_pinnedLabel").style.display = "none"
      document.getElementById("noteList_allnotesLabel").style.display = "none"
    }
    pinnedNotes.sort((a,b) => (rawTrackList.indexOf(a["noteTrack"]) > rawTrackList.indexOf(b["noteTrack"])) ? 1 : ((rawTrackList.indexOf(a["noteTrack"]) == rawTrackList.indexOf(b["noteTrack"])) ? ((parseInt(a["noteSongIndex"]) > parseInt(b["noteSongIndex"]) ? 1 : -1)) : -1)).forEach(remake => {
      document.getElementById("noteList_pinned").innerHTML = document.getElementById("noteList_pinned").innerHTML + `
      <div id="${remake["id"]}" class="elevatedframe note" style="margin:5px;text-align: left;">
        <span class="material-icons-round iconbutton thisispinned" style="font-size:20px;display: inline-block;text-align:left"></span><span id="${remake["id"]}_title" class="thisismoved" style="text-align: left;color:white;font-size: 18px;font-weight: 600;display:inline-block;overflow:hidden;white-space: nowrap;text-overflow: ellipsis;width:90%">${remake["noteTitle"]}</span><div style="display: inline-block;">
          <span class="material-icons-round iconbutton" id="${remake["id"]}_triggerOptions" style="font-size:20px;display: inline-block;text-align:left">more_horiz</span>
          <div class="option-dropdown" id="${remake["id"]}_options" style="outline:none" tabindex="-1">
            <a href="#" class="pinNote option-dropdown-enabled" style="border-radius: 8px 8px 0px 0px" id="${remake["id"]}|pin">Unpin</a>
            <a href="#" class="editNote" style="text-decoration: none;border-radius: 0px 0px 0px 0px;" id="${remake["id"]}|edit">Edit</a>
            <a href="#" class="removeNote" style="text-decoration: none;border-radius: 0px 0px 8px 8px;color:pink;" id="${remake["id"]}|delete">Delete</a>
          </div>
        </div><br/>
        <span id="${remake["id"]}_location" style="text-align: left;color:white;font-size: 12px;display:inline-block;overflow:hidden;white-space: nowrap;text-overflow: ellipsis"><i>${remake["isDuring"] ? "" : "After "}${remake["noteSong"]} (${parseInt(remake["noteSongIndex"])+1})</i></span><br/>
        <span id="${remake["id"]}_creator" style="text-align: left;color:white;font-size: 12px;display:inline-block;overflow:hidden;white-space: nowrap;text-overflow: ellipsis"><i>${remake["isAdminIssued"] ? "Director's Note - Only For You" : "Your Personal Note by You!"}</i></span><br/>
        <span id="${remake["id"]}_content" style="text-align: left;color:white;font-size: 14px;display:inline-block;word-wrap: break-word;overflow-x:hidden">${remake["noteContent"]}</span><br/>
        
        
      </div>
      `
    });
    
    notes.forEach(el => {
      document.getElementById(el["id"] + "_triggerOptions").addEventListener('click', function(){
        document.getElementById(el["id"] + "_options").style.transform = "translateY(-" + document.getElementById("noteList").scrollTop + "px)"
        document.getElementById(el["id"] + "_options").style.display = "block"
        document.getElementById(el["id"] + "_options").focus()
      });
      document.getElementById(el["id"] + "_options").addEventListener('focusout', function(evt){
        if(evt.relatedTarget == null || evt.relatedTarget.localName != "a"){
          document.getElementById(el["id"] + "_options").style.display = "none"
        }
        
      });
    });

    Array.from(document.getElementsByClassName("removeNote")).forEach(el => {
      el.addEventListener('click', function(evt){
      var noteId = evt.srcElement.id.split("|")[0]
      document.getElementById(noteId + "_options").style.display = "none"
      document.getElementById("selected_removeNote").value = noteId;
      document.getElementById("deleteNote").style.display = "";
      
    });
    
    })
    Array.from(document.getElementsByClassName("editNote")).forEach(el => {
      el.addEventListener('click', function(evt){
      var noteId = evt.srcElement.id.split("|")[0]
      var noteObject = notes.filter(note => note["id"] == noteId)[0]
      document.getElementById(noteId + "_options").style.display = "none"
      document.getElementById("selected_editNote").value = noteId;
      document.getElementById("title_editNote").value = noteObject["noteTitle"]
      document.getElementById("content_editNote").value = noteObject["noteContent"]
      document.getElementById("after_editNote").checked = !noteObject["isDuring"]
      document.getElementById("phases_editNote").value = noteObject["noteTrack"]
      refreshSongDropDown(noteObject["noteTrack"]);
      document.getElementById("songs_editNote").value = parseInt(noteObject["noteSongIndex"])
      document.getElementById("changeNote").style.display = "";
      
    });
    
    })
    Array.from(document.getElementsByClassName("pinNote")).forEach(el => {
      
        el.addEventListener('click', function(evt){
        var noteId = evt.srcElement.id.split("|")[0]
        if(pinnedNotes.filter(el => el["id"] == noteId).length == 0){
          document.getElementById(noteId + "_options").style.display = "none"
          var element = $('#' + noteId).detach();
          pinnedNotes.push(notes.filter(note => note["id"] == noteId)[0])
          resetNoteList();
        }else{
          console.log(pinnedNotes.filter(el => el["id"] == noteId)[0])
          console.log(pinnedNotes.indexOf(pinnedNotes.filter(el => el["id"] == noteId)[0]))
          pinnedNotes.splice(pinnedNotes.indexOf(pinnedNotes.filter(el => el["id"] == noteId)[0]),1)
          resetNoteList();
        }
        
        
      });
      
    })

    if(idToScrollTo != undefined && idToScrollTo != null){
      var topPos = document.getElementById(idToScrollTo).offsetTop;
      document.getElementById('noteList').scrollTop = topPos;
    }
  }

  ipcRenderer.on("songsToLoad", (event,args) => {
    // rename to songSchema soon
    songList = args['songs']['tracks']
    var phaseCreationIndex = 0
    songList.forEach(track => {
      rawTrackList.push(track["trackName"])
      
    });
    ipcRenderer.send("getNotes")
  });

  
  ipcRenderer.on('notesToLoad', (event,args) => {
    args["roleNotes"].sort((a,b) => (rawTrackList.indexOf(a["noteTrack"]) > rawTrackList.indexOf(b["noteTrack"])) ? 1 : ((rawTrackList.indexOf(a["noteTrack"]) == rawTrackList.indexOf(b["noteTrack"])) ? ((parseInt(a["noteSongIndex"]) > parseInt(b["noteSongIndex"]) ? 1 : -1)) : -1)).forEach(el => {
      var trackIndex = rawTrackList.indexOf(el["noteTrack"])
      var isValidlyPlaced = false
      if(songList[trackIndex]["trackSongs"][el["noteSongIndex"]]["songName"] == el["noteSong"]){
        isValidlyPlaced = true;
      }
      notes.push(el)
      document.getElementById("noteList_allnotes").innerHTML = document.getElementById("noteList_allnotes").innerHTML + `
      <div id="${el["id"]}" class="elevatedframe note" style="margin:5px;text-align: left;">
        <span class="material-icons-round iconbutton thisispinned" style="font-size:20px;display: inline-block;text-align:left"></span><span id="${el["id"]}_title" class="thisismoved" style="text-align: left;color:white;font-size: 18px;font-weight: 600;display:inline-block;overflow:hidden;white-space: nowrap;text-overflow: ellipsis;width:90%">${el["noteTitle"]}</span><div style="display: inline-block;">
          <span class="material-icons-round iconbutton" id="${el["id"]}_triggerOptions" style="font-size:20px;display: inline-block;text-align:left">more_horiz</span>
          <div class="option-dropdown" id="${el["id"]}_options" style="outline:none" tabindex="-1">
            <a href="#" class="pinNote option-dropdown-enabled" style="border-radius: 8px 8px 0px 0px" id="${el["id"]}|pin">Pin</a>
            <a href="#" class="editNote" style="text-decoration: none;border-radius: 0px 0px 0px 0px;" id="${el["id"]}|edit">Edit</a>
            <a href="#" class="removeNote" style="text-decoration: none;border-radius: 0px 0px 8px 8px;color:pink;" id="${el["id"]}|delete">Delete</a>
          </div>
        </div><br/>
        <span id="${el["id"]}_location" style="text-align: left;color:white;font-size: 12px;display:inline-block;overflow:hidden;white-space: nowrap;text-overflow: ellipsis"><i>${el["isDuring"] ? "" : "After "}${el["noteSong"]} (${parseInt(el["noteSongIndex"])+1})</i></span><br/>
        <span id="${el["id"]}_creator" style="text-align: left;color:white;font-size: 12px;display:inline-block;overflow:hidden;white-space: nowrap;text-overflow: ellipsis"><i>${el["isAdminIssued"] ? "Director's Note - Only For You" : "Your Personal Note by You!"}</i></span><br/>
        <span id="${el["id"]}_content" style="text-align: left;color:white;font-size: 14px;display:inline-block;word-wrap: break-word;overflow-x:hidden">${el["noteContent"]}</span><br/>
        
        
      </div>
      `
      
    });
    notes.forEach(el => {
      document.getElementById(el["id"] + "_triggerOptions").addEventListener('click', function(){
        document.getElementById(el["id"] + "_options").style.transform = "translateY(-" + document.getElementById("noteList").scrollTop + "px)"
        document.getElementById(el["id"] + "_options").style.display = "block"
        document.getElementById(el["id"] + "_options").focus()
      });
      document.getElementById(el["id"] + "_options").addEventListener('focusout', function(evt){
        if(evt.relatedTarget == null || evt.relatedTarget.localName != "a"){
          document.getElementById(el["id"] + "_options").style.display = "none"
        }
        
      });
    });
    Array.from(document.getElementsByClassName("removeNote")).forEach(el => {
      el.addEventListener('click', function(evt){
      var noteId = evt.srcElement.id.split("|")[0]
      document.getElementById(noteId + "_options").style.display = "none"
      document.getElementById("selected_removeNote").value = noteId;
      document.getElementById("deleteNote").style.display = "";
      
    });
    
    })
    Array.from(document.getElementsByClassName("editNote")).forEach(el => {
      el.addEventListener('click', function(evt){
      var noteId = evt.srcElement.id.split("|")[0]
      var noteObject = notes.filter(note => note["id"] == noteId)[0]
      document.getElementById(noteId + "_options").style.display = "none"
      document.getElementById("selected_editNote").value = noteId;
      document.getElementById("title_editNote").value = noteObject["noteTitle"]
      document.getElementById("content_editNote").value = noteObject["noteContent"]
      document.getElementById("after_editNote").checked = !noteObject["isDuring"]
      document.getElementById("phases_editNote").value = noteObject["noteTrack"]
      refreshSongDropDown(noteObject["noteTrack"]);
      document.getElementById("songs_editNote").value = parseInt(noteObject["noteSongIndex"])
      document.getElementById("changeNote").style.display = "";
      
    });
    
    })
    Array.from(document.getElementsByClassName("pinNote")).forEach(el => {
      
        el.addEventListener('click', function(evt){
        var noteId = evt.srcElement.id.split("|")[0]
        if(pinnedNotes.filter(el => el["id"] == noteId).length == 0){
          document.getElementById(noteId + "_options").style.display = "none"
          var element = $('#' + noteId).detach();
          pinnedNotes.push(notes.filter(note => note["id"] == noteId)[0])
          resetNoteList();
        }else{
          console.log(pinnedNotes.filter(el => el["id"] == noteId)[0])
          console.log(pinnedNotes.indexOf(pinnedNotes.filter(el => el["id"] == noteId)[0]))
          pinnedNotes.splice(pinnedNotes.indexOf(pinnedNotes.filter(el => el["id"] == noteId)[0]),1)
          resetNoteList();
        }
        
        
      });
      
    })
    
    
  });
  ipcRenderer.on('instancesSent', (event, args) => {
    var passedDownInstances = JSON.parse(args['rawJson'])
    var mySocketId = args['mySocketId']
    passedDownInstances.forEach(el => {
        el.role = el.role == undefined ? {} : el.role
        el.role.prettyName = el.role.prettyName == undefined ? "Logging in..." : el.role.prettyName
        document.getElementById("instanceList").innerHTML = document.getElementById("instanceList").innerHTML + `
              <div class="elevatedframe" style="display: table;width:95%" id="${el.socketId}_frame">
                <div style="vertical-align:middle;width:7%;display:${el.unresponsive ? "none" : "table-cell"}" id="${el.socketId}_responsive">
                  <span class="material-icons-round iconbuttonalt thissong" style="font-size:18px;" title="Connected!">done</span> 
                </div>
                <div style="vertical-align:middle;width:7%;display:${!el.unresponsive ? "none" : "table-cell"}" id="${el.socketId}_unresponsive">
                  <span class="material-icons-round iconbuttonalt thissong" style="font-size:18px;" title="We are having trouble connecting to this device right now...">bolt</span> 
                </div>
                
                <div style="display:table-cell;width:50%">
                  <span style="text-align: left;color:white;font-size: 18px;font-weight: 600;margin-right: 20px;overflow:hidden;vertical-align:middle;max-width:70%;white-space: nowrap;text-overflow: ellipsis;display:block" id="${el.socketId}_roleName">${el.role.prettyName + (el.deviceId == mySocketId ? " (You)" : "")}</span>
                  <span style="text-align: left;color:white;font-size: 12px;font-weight: 600;margin-right: 20px;overflow:hidden;vertical-align:middle;max-width:70%;white-space: nowrap;text-overflow: ellipsis;display:block" id="${el.socketId}_name">${el.deviceId}</span>
                </div>
                <span style="text-align: left;display: table-cell;color:white;font-size: 18px;font-weight: 600;margin-right: 20px;overflow:hidden;vertical-align:middle;max-width:70%;white-space: nowrap;text-overflow: ellipsis" id="${el.socketId}_ready">${el.ready == true ? "Ready" : "Not Ready"}</span>
                <span class="material-icons-round iconbutton download" style="font-size:24px;display: table-cell;vertical-align:middle;margin-right:5px;text-align:right;width:7%">lock</span>
                <span class="material-icons-round iconbutton download" style="font-size:24px;display: table-cell;vertical-align:middle;margin-right:5px;text-align:right;width:7%">logout</span>
                <span class="material-icons-round iconbutton download" style="font-size:24px;display: table-cell;vertical-align:middle;margin-right:5px;text-align:right;width:7%">block</span>
              </div><br/>
              `
    });
  });

    ipcRenderer.on('instancesUpdate', (event, args) => {
        var instanceChanges = JSON.parse(args['rawJson'])
        var mySocketId = args['mySocketId']
        instanceChanges.forEach(ci => {
          console.log(ci.change)
            if(ci.change == "update"){
              ci.data.role = ci.data.role == undefined ? {} : ci.data.role
              ci.data.role.prettyName = ci.data.role.prettyName == undefined ? "Logging in..." : ci.data.role.prettyName
              document.getElementById(ci.data.socketId + "_responsive").style.display = ci.data.unresponsive ? "none" : "table-cell"
              document.getElementById(ci.data.socketId + "_unresponsive").style.display = !ci.data.unresponsive ? "none" : "table-cell"
              document.getElementById(ci.data.socketId + "_roleName").innerHTML = ci.data.role.prettyName + (ci.data.socketId == mySocketId ? " (You)" : "")
              document.getElementById(ci.data.socketId + "_ready").innerHTML = ci.data.ready == true ? "Ready" : "Not Ready"
            }else if(ci.change == "delete"){
              document.getElementById(ci.data.socketId + "_frame").remove()
            }else if(ci.change == "create"){
              var el = ci.data
              el.role = el.role == undefined ? {} : el.role
              el.role.prettyName = el.role.prettyName == undefined ? "Logging in..." : el.role.prettyName
              document.getElementById("instanceList").innerHTML = document.getElementById("instanceList").innerHTML + `
              <div class="elevatedframe" style="display: table;width:95%" id="${el.socketId}_frame">
                <div style="vertical-align:middle;width:7%;display:${el.unresponsive ? "none" : "table-cell"}" id="${el.socketId}_responsive">
                  <span class="material-icons-round iconbuttonalt thissong" style="font-size:18px;" title="Connected!">done</span> 
                </div>
                <div style="vertical-align:middle;width:7%;display:${!el.unresponsive ? "none" : "table-cell"}" id="${el.socketId}_unresponsive">
                  <span class="material-icons-round iconbuttonalt thissong" style="font-size:18px;" title="We are having trouble connecting to this device right now...">bolt</span> 
                </div>
                
                <div style="display:table-cell;width:50%">
                  <span style="text-align: left;color:white;font-size: 18px;font-weight: 600;margin-right: 20px;overflow:hidden;vertical-align:middle;max-width:70%;white-space: nowrap;text-overflow: ellipsis;display:block" id="${el.socketId}_roleName">${el.role.prettyName + (el.deviceId == mySocketId ? " (You)" : "")}</span>
                  <span style="text-align: left;color:white;font-size: 12px;font-weight: 600;margin-right: 20px;overflow:hidden;vertical-align:middle;max-width:70%;white-space: nowrap;text-overflow: ellipsis;display:block" id="${el.socketId}_name">${el.deviceId}</span>
                </div>
                <span style="text-align: left;display: table-cell;color:white;font-size: 18px;font-weight: 600;margin-right: 20px;overflow:hidden;vertical-align:middle;max-width:70%;white-space: nowrap;text-overflow: ellipsis" id="${el.socketId}_ready">${el.ready == true ? "Ready" : "Not Ready"}</span>
                <span class="material-icons-round iconbutton download" style="font-size:24px;display: table-cell;vertical-align:middle;margin-right:5px;text-align:right;width:7%">lock</span>
                <span class="material-icons-round iconbutton download" style="font-size:24px;display: table-cell;vertical-align:middle;margin-right:5px;text-align:right;width:7%">logout</span>
                <span class="material-icons-round iconbutton download" style="font-size:24px;display: table-cell;vertical-align:middle;margin-right:5px;text-align:right;width:7%">block</span>
              </div><br/>
              `
            }
        });
    });

  ipcRenderer.send("getInstanceList")
  ipcRenderer.send("getMeSpiderman")
  const closeApp = document.getElementById('closeApp');
  closeApp.addEventListener('click', () => {
    ipcRenderer.send('quitapp');
  });
</script>

</html>
